language: python
python:
- '3.6'
cache: pip
before_install:
- echo -e "machine github.com\n  login $CI_USER_TOKEN" > ~/.netrc
install:
- pip install codecov pytest-cov
- pip install -e .
- pip install -e .[dev]
- export ETH_PRIVATE_KEY=$TEST_ETH_PRIVATE_KEY
- npm install truffle
- git clone git@github.com:skalenetwork/skale-manager.git
- cd skale-manager/
- PRIVATE_KEY=$SKALE_PY_TESTNET_PRIVATE_KEY  truffle migrate --network SKALE_private_testnet
- cp data/SKALE_private_testnet.json ../test_abi.json && cd ..
script:
- ./run-tests.sh
after_success:
- codecov -t $CODECOV_TOKEN
env:
  global:
  - secure: G8lx4Mn4Aa/rcGekVoMTT3HXjES0oOQ2509rRdVlYpZ5wNCgD5pR1llDmuA5fFkozI/oag3+Jlk2VXwVR7sUO6WdNanyA5o07UTvsxCtf2EnieO6HFqF4pt/ajN4jlccsrKQVwazpPWDUJZwmGf6Op8MGJyc/RYe2Z9LlGrvooDeW0Pc3bQAdxXxFEDwYGsaIPwqQyrFiQwZye0gbrYtLYPLB5GaBlyvwl1cNMNkXOaqoy7GIA2fwrNIRc9tqL6gQiPHFNi/HWc0OLhXujHy54IChC4Tw1PPqo6MLE8KB6GYhIIEG6iRfyXKBZRnJNt5HoaBbgJzTLC3nteRCf9721gpZc0DPD4cbuuG1j2FFAFyXWGbe6Vn2klLPIJ/OJ8bkZ7RURaYZl+gysAdAVMpN9JSzxTiyc3GXKk91XTz5ey1qxEUDLEa0gD4o8Tt0hX8tYKTXEou5Ee7feUPW4HjF9+fHEReVEnMdcWFFZJY7zwmp1N7g2ePU8TJTCJUNGv9Fr8mM0mEQ74z+lmOYijs4Q6GYGEXUEfhoL5+O8vU0GzsfkeD/DCv4qoJJsKAyolETGtsUNsw2KA+dlEoz6WpJ0OGXDZbo3z6Lv6l8KsIRL+tASnNknVmEtisQMBQcv4mMfm6qhD/jDq7QseFIN7/vmnA9gDgHhtAlw4i4Pf1FGk=
  - secure: RnjUK3x48Uj7oZZ4C4oehXtAyP9TCO5E8J95you6UdwdpSf79aSnSRK6I+t7G5CktOQVFJu86D/+l0DeilpI1UgsWWxLYyOr29dW9iBl0mTO30YqGn1brJWx1FCQ/wvbIzdDDYnplGdjJCQ+ZEHJ16eCUUW+jbYCiCgBTzk3Km3SNC3Bh8CCUpy/aduvsMGoJx3c2EWFL/f8nAaYn3/iisLmk4iMflPEFmuIX0ipC61lqrBh4QVJqkrDLPRpXPEqLcLMf1Q3CmvFYhT04N3R6er3oKupS9Ec8Aj1piRmypfEuOUg1SnD9kipWzKGand8iN8t7X1ve35o0ZG75DuPmkvB6TlJdxaD+IW0qY9rIYK1glu70wVoOpXICHqtmXC13ZAsd4rdAWQ3fglPfEXjm3LPjAtpNX7RIMPUbuV8PwKnGA8ubV2WUdljx8S2L3H0L/vhq5MJdV7Zv2joOe5xoyoWY7MppgK15zXQlDvcFsiMOJh/4OhW3KfH6Bn79eS4nRmaiLkaHpdj6vKGUHIzq+QJFdH8I6W7glFivt4VARy/mafdj21YIyYn+Ui2pnWKe00A/Gn77Rolgfl6BwLMRgI9fq8z9pR4pcevizU0tgHqHe5f7XtT/cd4LcWIYFvm7DCSMHGkvKhtq0SIUyWrCZMJ1yd1vSq+yAEOe5Q1aGc=
  - secure: eCTccXSZWXUAHxLEHpCnTtQK4Kx+cZqtvpzJ750XkV0XzbH/d/ySLsQ/X4OCNN4nvez+BG6dNu7dSPIkhUUOnQ3Onm8IBmIoc1phUh4k19gEhmtGf9WcEt5oQDnV5kiMkvMUq+Qf8V4ieT9anYAtaw9+3eS/A7aEXxki3UCt4zVmMQKMi6aivDpBXQxDV4mrVkp5d4fZyKyoW1DjBybawFqKNObWArnZWx1ehDJsKCZxkUNzwPn2PWxVMjxXGbF6TpC0v0M9Gg+KqsCpj7RET6zhmC7W2TbY2xM07I72el7IMkTFw1vxrgq9VC/5GojYrQsTMoJRzTR8flM3qpdo0P9gcDoFhkPy+yAoRAO9OUgTlg6Fl6JzAYig8+caQlh9AGnIGK801WTrXlZqYH59550iseo+SIJefJqa5PB50Yqyvl8rngAeDrQekLW7p2iB1NHd2Q2XRfgYYIdLQYikuUmHZrFOccWAJmtLYD0l/ux3ZMFU5OTzuvXNJh6tLKRAqMWOPSc+US38+wQRsmqlRbwVDpHmMHIog3Q/outa7+Ao8Lx62+u64/whyDOLfSjr3HtzO4fBsJ7huHOqzuVhCBPRkjTzbachrbSH3GSduCb9IQfnOP+BnVIY28XsuU3CAh5xTi0H8WRSUCe1qpsksmXEpGGg5OdkUP9uS6Lzrvw=
  - secure: Nh3DGZPqXZ0kjG+7bOxkYV4kgl32Mc4jiQ6PBpqlsips3ZJBQWgQ8IV17HL+0Gg3YEMiIx0QWfz0XciIGIhGQfnQYOLlwAOLOc0FcZMHL/bf05cxJ4KMz8VF5q3/HcfinGWeFzUZ+gFfYsmsefvfcoK1VRp8vJfjuKC2DIPip0I5oWp1g5euhKFBT3BZ51D/9YzqvvFqAn03wRtoyxlFjFjBLT86etNzkYlBjIxofwc8AuEKszJo+tIQaoLwBayrZsUFu2ivZsqWIKIrUBZEouoIVB7H+F5TL6QCs5fglzqBbP37je8oCvhQMItBIIhHonAAmIzdOzCjGAjTPXxUcfSnRHbcWevGKqBwCTbdAYX/sIDhAPlpkwS98KFnGIqw6NigjJbm+OI93MjuiKSpwgrJ3R+i/n0xkiGfvG1cBxzheIj9+n2BCvQC3ZrcImC6uIZtr9WOtCbB9iXp/DJ1QlUJL9ljXaYnYZ6l9BTiVOgxHHkjL0qJd1S/tjoXS31NLhCnP+wrLOA9PDyIe32Gv7VHRso74IyS4Kea7lYT9JvmCc6oy7uH2RXkT8m61S7ZcGpsjX5YvXFlF1nYxjl/96SALCbWqNLkkr5k8NYI2SYK2ICpBo3gJJupZFK2vSMqXqDlhgEvPNDSSNrp7O6kxglFlnfjjNLx6sv8/WqU//I=
  - secure: GdxoMKJX9YRpfyJAtMnLe0bRGQJgIKxOM9HFcYov3OO192DnPvoY3dn2lJnH5UsY7v6ZZf4TUsQECUpzMhfUYmVRRFyaukHv9auL7jRewgiI0gwnD7JOffquED5Q+YKjm32405NMBw27tEa5GyL+jdhzDp2U/l9FmSiPF5W16wj0blwZkgZrLwZiTSxxpCwfbFFRWKpYGHSBF7LDaworBs9NX3T9SdkOrmvoarrCxrIpwsPCSAMERIytQmtj03h7vVy6nvoHlQoG50EujejniufeNGQ2J7InRzXv45ZcgB9e1zH3XQkESiTXKH7aNT/4eW8GiHgQunx+XebYz57aNGQ3vlBK86pyPtxtnGKLkYKQEOQ2uEUIeJKEqL1ShK1UihOcrB7WbJMZdtnE/UFrOrjujTlSVh8eNe+W6S5rq2t3CcPgGxVgbUs3CB7zT1S2E3U1lwe7mCL3o4D7NQrsVwpUA9I/6LzZXlfYoZjopMfNGVo6qUsjqm/6MLml5TRB18hI8RI2ftJ4d+o17JOMWDFyYo4PBrO3/LGgc7yUsLm+Q0c9lttnHuftyrMEF71iT3Bk8rSqBg9zEBE67sy2uSJwOQQAczBgrSFEiO/AP6yJaecXQZxT4Xv+KI76POz8IwMEKzLOQVmguuW9E0bgSCXCJwj8mlpySxZOT0PVj1g=
